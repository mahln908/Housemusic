<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <!-- No <head> do seu index.html -->
<link rel="manifest" href="manifest.json">
<link rel="icon" href="icon-192.png">

<!-- Substitua todos os caminhos por relativos -->
<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('sw.js')  // Caminho relativo
    .then(reg => console.log('SW registrado'))
    .catch(err => console.log('Erro:', err));
}
</script>
  <!-- Adicione ANTES do <title> -->
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#ff0000">

<!-- Ícones (adicione depois do <title>) -->
<link rel="icon" href="/icon-192.png">
<link rel="apple-touch-icon" href="/icon-192.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>House MP3 - Player de Música</title>
    <style>
        /* [Todo o seu CSS original permanece EXATAMENTE IGUAL] */
        
        /* Apenas adicionamos isso no FINAL da tag <style> */
        html, body {
            overscroll-behavior-y: contain;
            -webkit-overflow-scrolling: touch;
            height: 100%;
            overflow: hidden;
        }
    </style>
    <!-- Adicionamos estas 3 meta tags no HEAD (sem remover nada) -->
    <meta name="theme-color" content="#000000">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
</head>
<body>
    <!-- [Todo o seu corpo HTML permanece EXATAMENTE IGUAL] -->

    <script>
        // [Todo o seu JavaScript original permanece aqui]
        
        // ====== APENAS SUBSTITUIMOS a função onPlayerReady ====== //
        function onPlayerReady(event) {
            console.log('Player YouTube pronto - Ativando modo persistente');
            
            // 1. Cria contexto de áudio oculto
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            const audioContext = new AudioContext();
            
            // 2. Cria elemento de áudio fantasma
            const ghostAudio = new Audio();
            ghostAudio.src = 'data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQ...';
            ghostAudio.loop = true;
            ghostAudio.volume = 0.001;
            
            // 3. Configuração invisível
            ghostAudio.style.display = 'none';
            document.body.appendChild(ghostAudio);
            
            // 4. Conecta ao contexto de áudio
            const source = audioContext.createMediaElementSource(ghostAudio);
            source.connect(audioContext.destination);
            
            // 5. Controle de visibilidade
            document.addEventListener('visibilitychange', () => {
                if (!document.hidden && ghostAudio.paused) {
                    ghostAudio.play().catch(e => console.log('Ghost play error:', e));
                }
            });
            
            // 6. Inicia automaticamente com o player
            player.addEventListener('onStateChange', (e) => {
                if (e.data === YT.PlayerState.PLAYING) {
                    ghostAudio.play().catch(e => console.log('Ghost autoplay blocked'));
                }
            });
        }
        
        // [Todo o resto do seu código permanece INTACTO]
    </script>
</body>
</html>
